太好了，这是一个明智的决定。使用 **Windows + Visual Studio (MSVC)** 是让你们团队在第一周存活下来的最佳方案。

这是一份**“保姆级”环境配置指南**。请复制这份指南，发给你的 14 位组员（特别是大一同学），要求每个人严格按照步骤执行。

------

### ⚠️ 准备工作：所有组员必须做的 (Common)

无论写前端还是后端，请先安装这三个基础软件：

1. **Git for Windows:**
   - 下载：https://git-scm.com/download/win
   - 安装时一路“下一步”即可。
2. **Node.js (LTS 版本):**
   - 下载：https://nodejs.org/en (选左边的 LTS 版本，如 v20.x)
   - *作用：* 前端必用，后端也需要用它来运行一些辅助工具。
3. **Visual Studio 2022 Community (社区版):**
   - 下载：https://visualstudio.microsoft.com/zh-hans/vs/community/
   - **关键步骤：** 安装时会弹出一个“工作负载”选择界面。
   - **必须勾选：** **[使用 C++ 的桌面开发]** (Desktop development with C++)。
   - (可选) 如果想做前端，也可以勾选 **[Node.js 开发]**。

------

### 第一部分：服务端组配置 (C++ Backend)

**目标：** 安装 C++ 编译器、包管理器 vcpkg、Web 框架 Drogon、数据库。

#### 1. 安装 vcpkg (C++ 包管理器)

*这是最重要的一步，解决了 C++ 找库难的问题。*

请打开 **PowerShell** (管理员模式)，依次执行：

PowerShell

```
# 1. 进入 C 盘根目录 (为了路径短，避免报错)
cd C:\

# 2. 克隆 vcpkg 仓库
git clone https://github.com/microsoft/vcpkg.git

# 3. 运行安装脚本
cd vcpkg
.\bootstrap-vcpkg.bat

# 4. 集成到全局 (这一步让 VS 自动识别 vcpkg)
.\vcpkg integrate install
```

#### 2. 安装 Drogon 及其依赖

*警告：这一步需要下载并编译很多源码，根据电脑性能，可能需要 20-40 分钟。去喝杯奶茶吧。*

在 PowerShell (vcpkg 目录下) 执行：

PowerShell

```
# 安装 drogon，指定 x64-windows 版本 (与 VS 默认一致)
.\vcpkg install drogon:x64-windows
```

#### 3. 安装数据库

1. **MySQL:**
   - 下载 [MySQL Installer](https://dev.mysql.com/downloads/installer/)。
   - 选择 "Server only" 或 "Developer Default"。
   - **记下你的 root 密码！** (建议全组统一为 `123456`)。
2. **Redis:**
   - 由于 Redis 官方不支持 Windows，请使用微软归档版本或 Memurai。
   - 推荐下载：[Redis-x64-5.0.14.1.msi](https://github.com/tporadowski/redis/releases)。
   - 安装后打开任务管理器 -> 服务，确认 `Redis` 正在运行。

------

### 第二部分：客户端组配置 (Frontend)

**目标：** 安装 Node.js 环境，搭建 React + Electron 脚手架。

#### 1. 启用 Yarn (比 npm 快)

打开 PowerShell 或 CMD：

Bash

```
npm install -g yarn
```

#### 2. 初始化项目 (仅需组长做一次)

组长在电脑上建好项目后推送到 Git，组员直接 Clone 即可。

组长操作流程：

Bash

```
# 创建基于 Vite 的 React 项目
yarn create vite my-im-app --template react

cd my-im-app

# 安装 Electron 相关依赖
yarn add -D electron electron-builder concurrently wait-on cross-env

# 安装 UI 库 Tailwind CSS
yarn add -D tailwindcss postcss autoprefixer
npx tailwindcss init -p

# 安装 Zustand (状态管理) 和 WebSocket 库
yarn add zustand react-use-websocket clsx tailwind-merge
```

------

### 第三部分：IDE 配置 (如何写代码)

这里分为**“新手模式”**和**“进阶模式”**。

#### 模式 A：新手/普通组员 (Visual Studio 2022) —— **推荐**

- **适用：** 大一同学，不想折腾配置的人。
- **操作：**
  1. 打开 Visual Studio 2022。
  2. 点击 **“打开本地文件夹”** (Open a local folder)。
  3. 选择包含 `CMakeLists.txt` 的项目根目录。
  4. VS 会自动检测到 CMake 项目。等待下方进度条走完（Generating Cache）。
  5. 点击顶部的绿色三角形 **“启动”** (Select Startup Item)，选择你的可执行文件即可运行。

#### 模式 B：组长/极客 (VS Code) —— **需手动配置**

- **适用：** 习惯 VS Code 的大二同学。

- **必需插件：** `C/C++`, `CMake Tools`, `Prettier`, `Tailwind CSS IntelliSense`。

- 关键配置：

  在项目根目录创建 .vscode/settings.json：

  JSON

  ```
  {
      "cmake.configureSettings": {
          // 必须指向你的 vcpkg 路径
          "CMAKE_TOOLCHAIN_FILE": "C:/vcpkg/scripts/buildsystems/vcpkg.cmake"
      }
  }
  ```

------

### 第四部分：给组长的“救命文件”模板

为了让大一同学一上来就能跑通，请组长在 Git 仓库里放好这两个文件：

#### 1. 通用的 `CMakeLists.txt` (服务端)

直接复制这个文件，能解决 90% 的 Drogon 链接问题：

CMake

```
cmake_minimum_required(VERSION 3.10)
project(IM_Server CXX)

# 设置 C++ 标准
set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

# 寻找 Drogon (vcpkg 会自动处理路径)
find_package(Drogon CONFIG REQUIRED)

# 添加你的源文件
add_executable(im_server main.cc)

# 链接库 (私有链接 Drogon)
target_link_libraries(im_server PRIVATE Drogon::Drogon)

# 如果用了 MySQL，可能还需要链接
# target_link_libraries(im_server PRIVATE drogon_orm) 
```

#### 2. 简单的 `main.cc` (测试用)

C++

```
#include <drogon/drogon.h>
using namespace drogon;

int main() {
    // 监听 8888 端口
    app().addListener("0.0.0.0", 8888);
    // 简单的 Hello World 接口
    app().registerHandler("/hello", [](const HttpRequestPtr& req,
                                       std::function<void (const HttpResponsePtr &)> &&callback) {
        auto resp = HttpResponse::newHttpResponse();
        resp->setBody("Hello, this is the IM Server!");
        callback(resp);
    });
    // 运行
    LOG_INFO << "Server running on 127.0.0.1:8888";
    app().run();
    return 0;
}
```

------

### ✅ 验证是否成功

请让所有后端组员执行以下步骤，截图打卡：

1. 打开 VS 2022 (或 VS Code)。
2. 加载 CMake 项目。
3. 编译并运行上面的 `main.cc`。
4. 浏览器访问 `http://localhost:8888/hello`。
5. 如果网页显示 **"Hello, this is the IM Server!"** —— **恭喜，环境配置通关！**

需要我解释一下如何配置 `.gitignore` 来防止把几百兆的垃圾文件传到 Git 上吗？这对多人协作非常重要。